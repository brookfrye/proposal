---
title: "City Council Salary Growth and Comparable Titles"
output:
  html_document:
    theme: cosmo
    toc: true
    toc_depth: 2
    number_sections: true
    highlight: tango
    css: style.css
date: "`r format(Sys.Date(), '%B %d, %Y')`"
editor_options:
  markdown:
    wrap: sentence
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)

library(rprojroot)
root_dir <- find_root(has_file("proposal.Rproj"))
knitr::opts_knit$set(root.dir = root_dir)

# Knit child Rmds while stripping their YAML headers
knit_child_strip_yaml <- function(path, prefix) {
  lines <- readLines(path, warn = FALSE)
  if (length(lines) >= 2 && trimws(lines[1]) == "---") {
    end <- which(trimws(lines[-1]) == "---")
    if (length(end) > 0) {
      end <- end[1] + 1
      if (end < length(lines)) lines <- lines[(end + 1):length(lines)]
    }
  }
  # Prefix chunk labels to avoid duplicates across child docs
  lines <- sub(
    "^```\\{r\\s*([^,} ]+)",
    paste0("```{r ", prefix, "_\\1"),
    lines
  )
  knitr::knit_child(text = lines, quiet = TRUE)
}
```

## Salary Growth Analysis

```{r child_salary_growth, results='asis'}
cat(knit_child_strip_yaml(file.path(root_dir, "code", "salary_growth_analysis.Rmd"), "salary_growth"))
```

## Comparable Titles

```{r child_combined_formatted, results='asis'}
cat(knit_child_strip_yaml(file.path(root_dir, "code", "comparable_salaries", "Combined_formatted.Rmd"), "combined"))
```
